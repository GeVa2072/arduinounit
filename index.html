<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Arduinounit : ArduinoUnit is a unit testing framework for Arduino libraries" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Arduinounit</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mmurdoch/arduinounit">View on GitHub</a>

          <h1 id="project_title">Arduinounit</h1>
          <h2 id="project_tagline">ArduinoUnit is a unit testing framework for Arduino libraries</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mmurdoch/arduinounit/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mmurdoch/arduinounit/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>Current Version: 1.6</h1>

<h1>Getting Started</h1>

<p>Create a directory called ArduinoUnit under <code>&lt;arduino installation directory&gt;\libraries</code>.</p>

<p>Copy everything from the <code>src</code> directory to this new directory.</p>

<p>Open a sketch in arduino and click <code>Sketch | Import Library... | ArduinoUnit</code> to start unit testing.</p>

<p>For example, try this simple unit testing sketch:</p>

<pre><code>#include &lt;ArduinoUnit.h&gt;

// Create test suite
TestSuite suite;

void setup() {
  Serial.begin(9600);
}

// Create a test called 'addition' in the test suite
test(addition) {
  assertEquals(3, 1 + 2);
}

void loop() {
  // Run test suite, printing results to the serial port
  suite.run();
}
</code></pre>

<p>Upload this sketch to the Arduino (using the 'Upload' button, <code>File | Upload</code> or <code>Ctrl+U</code>).</p>

<p>Turn on the Serial Monitor (using the 'Serial Monitor' button, <code>Tools | Serial Monitor</code> or 
  <code>Ctrl+Shift+M</code>) and expect to see the following:</p>

<pre><code>Running test suite...
Tests run: 1 Successful: 1 Failed: 0
</code></pre>

<h1>FAQ</h1>

<ol>
<li>
<p>Q. I'm getting an error message like:
    <code>1: error: pasting "test_" and ""something"" does not give a valid preprocessing token</code>
    when I 'Verify' or 'Upload to I/O Board' my sketch. How can I fix this?</p>

<p>A. You have declared a test like this with the name in quotes:</p>

<pre><code>  test("something") {
      // ...
  }
</code></pre>

<p>The name of the test must not be quoted. i.e. it should look like this:</p>

<pre><code>  test(something) {
      // ...
  }
</code></pre>
</li>
<li>
<p>Q. I'm getting an error message like:
    <code>error: redefinition of 'SuiteAppender test_a_appender' In function 'void test_a(Test&amp;)':</code>
    when I 'Verify' or 'Upload to I/O Board' my sketch. How can I fix this?</p>

<p>A. You have two or more tests declared with the same name. For example:</p>

<pre><code>  test(a) {
      // ...
  }

  test(a) {
      // ...
  }
</code></pre>

<p>The names of all tests in the same sketch must be unique. This is true even if they are in 
     different test suites.</p>
</li>
<li>
<p>Q. I'm trying to write a custom assertion function but I keep getting an error message like:
    <code>error: '__test__' was not declared in this scope</code>
    when I 'Verify' or 'Upload to I/O Board' my sketch. How can I fix this?</p>

<p>A. You have probably defined a custom assertion function such as the following:</p>

<pre><code>  void assertStringsEqual(const char* expected, const char* actual) {
      assertEquals(strlen(expected), strlen(actual));
      for (int i = 0; i &lt; strlen(expected); i++) {
          assertEquals(expected[i], actual[i]);
      }
  }
</code></pre>

<p>and are trying to use it like this from within a test function:</p>

<pre><code>  assertStringsEqual("expected string", actualString);
</code></pre>

<p>To fix this you need to add a <code>Test&amp; __test__</code> parameter to the signature of the custom 
  assertion function, for example:</p>

<pre><code>  void assertStringsEqual(Test&amp; __test__, const char* expected, const char* actual) {
      assertEquals(strlen(expected), strlen(actual));
      for (int i = 0; i &lt; strlen(expected); i++) {
          assertEquals(expected[i], actual[i]);
      }
  }
</code></pre>

<p>and add <code>__test__</code> as the relevant argument when you call it, for example:</p>

<pre><code>  assertStringsEqual(__test__, "expected string", actualString);
</code></pre>
</li>
<li>
<p>Q. I'm trying to use a custom assertion function but I keep getting an error message like:
    <code>error: '&lt;custom_assertion_function&gt;' was not declared in this scope</code>
    when I 'Verify' or 'Upload to I/O Board' my sketch. How can I fix this?</p>

<p>A. You need to define the custom assertion function above where it is being used or 
    forward-declare it, for example:</p>

<pre><code>  // Forward declare custom assertion
  void assertStringsEqual(Test&amp; __test__, const char* expected, const char* actual);

  // ...

  test(something) {
      // Use custom assertion
      assertStringsEqual(__test__, "expected string", actualString);
  }

  // ...

  // Define custom assertion
  void assertStringsEqual(Test&amp; __test__, const char* expected, const char* actual) {
      assertEquals(strlen(expected), strlen(actual));
      for (int i = 0; i &lt; strlen(expected); i++) {
          assertEquals(expected[i], actual[i]);
      }
  }
</code></pre>
</li>
</ol><h1>Version History</h1>

<h2>Version 1.6 (17 February 2013)</h2>

<h3>Features added:</h3>

<p>Fake stream for use in place of other streams which allows for injecting bytes to be read
and intercepting bytes to be written.</p>

<h2>Version 1.5 (3 January 2013)</h2>

<h3>Bugs fixed:</h3>

<ul>
<li>Issue 4 - Added release notes for version 1.4.2</li>
<li>Issue 5 - SerialReporter fails for baud values above 9600.
Note that the fix for this is a <em>breaking change</em> and requires
all arduinounit sketches using the default serial reporting to
have <code>Serial.begin(&lt;baud_rate&gt;)</code> added in their <code>setup()</code> function</li>
<li>Issue 6 - Line numbers are being incorrectly reported for failing assertions on Arduino 1.0.3</li>
<li>Issue 7 - ArduinoUnit unit tests print garbage output indefinitely</li>
</ul><h2>Version 1.4.2 (2 October 2011)</h2>

<h3>Features added:</h3>

<ul>
<li>Support for Arduino 1.0 environment (check for arduino version to include correct header)</li>
</ul><h2>Version 1.4.1 (13 June 2011)</h2>

<h3>Bugs fixed:</h3>

<ul>
<li>Issue 2 - Compilation error on Arduino 0022</li>
<li>Issue 3 - Incomplete MIT license terms</li>
</ul><h2>Version 1.4 (28 June 2009)</h2>

<h3>Features added:</h3>

<ul>
<li>Checks and reporting on heap allocation failures.</li>
<li>Example of using ArduinoUnit to check the correct functioning of digital I/O pins 2-13.</li>
</ul><h3>Bugs fixed:</h3>

<ul>
<li><p>Each failed assertion counts as a single test function failure. Two failed assertions
in the same test function double-count the failure. Since the usual case is that 
failing assertions short-cut a test function execution by returning this is only
noticeable where a test function calls other functions which perform the assertions.</p></li>
<li>
<p>Stack/heap collisions are not reported and cause incorrect behaviour, reporting (for 
example):</p>

<pre><code>Equality assertion failed in 'nameReported' on line 310: expected 
'9599460892leFailingAssertion' but was '0'
</code></pre>
</li>
</ul><h2>Version 1.3 (01 June 2009)</h2>

<h3>Features added:</h3>

<ul>
<li>
<p>Allowed the use of variables named <code>test</code> in test functions. The name <code>__test__</code> is now a 
reserved word and if used as a variable name within a test function e.g. like this:</p>

<pre><code>test(name) {
  int __test__ = 0;
}    
</code></pre>

<p>verifying or uploading the sketch will cause the following compilation error:
<code>error: declaration of 'int __test__' shadows a parameter</code></p>
</li>
<li><p>Added keyword highlighting for <code>TestSuite</code>, <code>run</code>, <code>test</code>, <code>assertTrue</code>, <code>assertEquals</code>
and <code>__test__</code>.</p></li>
</ul><h3>Bugs fixed:</h3>

<ul>
<li>Line numbers of failing boolean assertions (assertTrue()) are 3 greater than the real
line numbers (line numbers reported for failing equality assertions are correct)</li>
</ul><h2>Version 1.2 (29 May 2009)</h2>

<h3>Features added:</h3>

<ul>
<li>
<p>Reduced the compiled size of sketches using ArduinoUnit:</p>

<pre><code>Usage                      From (bytes)    To (bytes)    Reduction (bytes)
-----------------------    ------------    ----------    -----------------
Including ArduinoUnit.h    2014            1906          108
Creating a test suite       766             774           -8
Running a test suite        132             120           12
-----------------------    ------------    ----------    -----------------
Total                      2912            2800          112
</code></pre>
</li>
</ul><h3>Bugs fixed:</h3>

<ul>
<li>Using <code>Sketch | Import Library | ArduinoUnit</code> <code>#includes</code> all the header files in the 
ArduinoUnit directory rather than just <code>ArduinoUnit.h</code>
</li>
</ul><h2>Version 1.1 (27 May 2009)</h2>

<h3>Bugs fixed:</h3>

<ul>
<li>When using multiple test suites in a sketch all assertions are reported in against the last 
defined suite.</li>
</ul><h2>Version 1.0 (25 May 2009)</h2>

<h3>Features added:</h3>

<ul>
<li>Simple test definition and execution</li>
<li>Boolean assertions</li>
<li>Integer equality assertions</li>
<li>Default reporting of results to the serial port</li>
<li>Ability to customize result reporting (e.g. where serial port is being used by the code under test)</li>
<li>Support for multiple (optionally named) test suites</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Arduinounit maintained by <a href="https://github.com/mmurdoch">mmurdoch</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
